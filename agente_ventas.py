# -*- coding: utf-8 -*-
"""Untitled0.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1M_t67QNZ5c5F6CsTW2pHu0bxf8syyAn6
"""

import pandas as pd

df = pd.read_csv("export_6876fc80b23c9_20250715211232.csv", sep=";", encoding="utf-8")
df.head()

catalogo = []

for index, row in df.iterrows():
    producto = {
        "sku": str(row["ID Orden"]),
        "nombre": str(row["DescripciÃ³n"]).strip(),
        "precio": int(str(row["Monto"]).replace("$", "").replace(".", "").replace("CLP", "").strip()),
        "link_pago": str(row["Link de Pago"]).strip()
    }
    catalogo.append(producto)

# Mostrar los 3 primeros productos para confirmar
for p in catalogo[:3]:
    print(p)

def recomendar_producto(nombre_cliente, necesidad, catalogo):
    print(f"ğŸ‘‹ Hola {nombre_cliente}, gracias por contactarte con DataIngenierÃ­a!")

    # Convertimos la necesidad a minÃºscula para hacer bÃºsquedas mÃ¡s flexibles
    necesidad = necesidad.lower()

    # Buscamos coincidencias en el nombre del producto
    sugerencias = [p for p in catalogo if necesidad in p["nombre"].lower()]

    if sugerencias:
        print("ğŸ§  Basado en lo que buscas, esto podrÃ­a interesarte:")
        for s in sugerencias:
            print(f"ğŸ”¹ {s['nombre']}\nğŸ’¸ Precio: ${s['precio']} CLP\nğŸ”— Link de pago: {s['link_pago']}\n")
        print("Â¿Quieres que te ayude a completar la compra o recibir mÃ¡s opciones?")
    else:
        print("âŒ No encontrÃ© coincidencias exactas. Â¿PodrÃ­as darme mÃ¡s detalles para ayudarte mejor?")

recomendar_producto("Juan", "windows", catalogo)

import streamlit as st

# TÃ­tulo del formulario
st.title("ğŸ§  Asistente IA de Ventas - DataIngenierÃ­a")

# Entrada de datos del usuario
nombre = st.text_input("ğŸ‘‹ Â¿CuÃ¡l es tu nombre?")
necesidad = st.text_input("ğŸ“ Â¿QuÃ© estÃ¡s buscando? (Ej: Windows, Office, Web, Soporte)")

# LÃ³gica de recomendaciÃ³n
if nombre and necesidad:
    sugerencias = [p for p in catalogo if necesidad.lower() in p["nombre"].lower()]

    if sugerencias:
        st.success(f"Hola {nombre}, encontrÃ© estas opciones para ti:")
        for producto in sugerencias:
            st.write(f"ğŸ”¹ {producto['nombre']} â€” ${producto['precio']} CLP")
            st.markdown(f"[ğŸ›’ Comprar ahora con Flow]({producto['link_pago']})", unsafe_allow_html=True)
    else:
        st.warning("No encontrÃ© coincidencias exactas. Â¿PodrÃ­as dar mÃ¡s detalles?")

